<?php use Src\Core\Helpers; ?>

<?php $this->template("base", ["title" => $title]); ?>

<?php $this->setSection("head"); ?>
    <link rel="stylesheet" href="<?= Helpers::baseUrl("/assets/css/home/styles.css"); ?>">
<?php $this->endSection("head"); ?>

<main class="container">
    <div class="row p-4 pb-0 pe-lg-0 pt-lg-5 align-items-center rounded-3 border shadow-lg mb-3 bg-white">
        <div class="col-lg-7 p-3 p-lg-5 pt-lg-3">
            <h1 class="display-3 fst-italic">Portal Interno<br>Maceió Petrópolis</h1>
            <p class="lead my-3">
                Aqui se encontra o que você precisa para navegar entre os sistemas e documentos da empresa.
            </p>

            <p class="lead mb-0">
                <a href="<?= Helpers::baseUrl("/link-center"); ?>" class="text-body-emphasis fw-bold">
                    Veja a central de links
                </a>
            </p>
        </div>
    </div>

    <div class="row align-items-md-stretch wrapper">
        <div class="col-md-6">
            <div class="h-100 p-5 shadow-sm target">
                <h2 class="text-center">Aniversariantes do mês</h2>

                <?php
                    $birthdayPeople = json_decode(
                        '[{"nome":"Maria Valdeilda Da Silva Rivaldo","local":"Preven\u00e7\u00e3o e Perdas","aniversario":"02\/08\/2023"},{"nome":"Josafa Verissimo Gomes","local":"Informatica","aniversario":"02\/08\/2023"},{"nome":"Liliane Maria Da Silva","local":"Opera\u00e7\u00e3o","aniversario":"03\/08\/2023"},{"nome":"Maria Jackeline Carneiro Da Silva","local":"Cart\u00e3o - Opera\u00e7\u00e3o","aniversario":"05\/08\/2023"},{"nome":"Ericleison Da Silva Cavalcante","local":"Deposito","aniversario":"06\/08\/2023"},{"nome":"Marcelo Bezerra Souto","local":"Reposi\u00e7\u00e3o hf","aniversario":"08\/08\/2023"},{"nome":"Cleiton Amaro Da Silva","local":"Empilhadeira","aniversario":"09\/08\/2023"},{"nome":"Maria Izabel Da Silva","local":"Opera\u00e7\u00e3o","aniversario":"09\/08\/2023"},{"nome":"Fabiana De Oliveira Ferreira","local":"Opera\u00e7\u00e3o","aniversario":"11\/08\/2023"},{"nome":"Clevania Rocha Da Silva","local":"Opera\u00e7\u00e3o","aniversario":"12\/08\/2023"},{"nome":"Simone Aparecida Oliveira Santos","local":"Frente Caixa","aniversario":"12\/08\/2023"},{"nome":"Matheus Kaua Da Silva Santos","local":"Programa Desenvolvimento","aniversario":"12\/08\/2023"},{"nome":"Jose Renato Dos Santos Dantas","local":"Reposi\u00e7\u00e3o","aniversario":"15\/08\/2023"},{"nome":"Daniel Moura Oliveira De Almeida","local":"Descarga","aniversario":"19\/08\/2023"},{"nome":"Aline Gomes Feliciano Da Silva","local":"Opera\u00e7\u00e3o","aniversario":"25\/08\/2023"},{"nome":"Jose Roberto De Souza Junior","local":"Manuten\u00e7\u00e3o","aniversario":"25\/08\/2023"},{"nome":"Taciane Felix Da Silva","local":"Cafeteria","aniversario":"25\/08\/2023"},{"nome":"Lucas Joaquim Dos Santos","local":"Reposi\u00e7\u00e3o","aniversario":"26\/08\/2023"},{"nome":"Dayane Barros Da Silva","local":"Opera\u00e7\u00e3o","aniversario":"26\/08\/2023"},{"nome":"Vander Jose Gomes Da Silva","local":"Conferencia Deposito","aniversario":"27\/08\/2023"}]'
                    );
                    $phones = json_decode(
                        '[{"id_lista":"14166","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5641","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5641","id_setor":"1","setor":"Administra\u00e7\u00e3o","id_depto":"1","depto":"Almoxarifado","registro":" 14166","relevancia":"3"},{"id_lista":"14142","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5604","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5604","id_setor":"1","setor":"Administra\u00e7\u00e3o","id_depto":"33","depto":"Cartazista","registro":" 14142","relevancia":"3"},{"id_lista":"14141","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5603","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5603","id_setor":"1","setor":"Administra\u00e7\u00e3o","id_depto":"1090","depto":"Estoquista","registro":" 14141","relevancia":"3"},{"id_lista":"14148","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5610","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5610","id_setor":"1","setor":"Administra\u00e7\u00e3o","id_depto":"21","depto":"Manutenc\u00e3o","registro":" 14148","relevancia":"3"},{"id_lista":"14178","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5666","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5666","id_setor":"232","setor":"Cart\u00e3o Atacad\u00e3o","id_depto":"1589","depto":"Estande de Cart\u00e3o","registro":" 14178","relevancia":"3"},{"id_lista":"14153","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5615","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5615","id_setor":"131","setor":"CPD","id_depto":"1089","depto":"CPD","registro":" 14153","relevancia":"3"},{"id_lista":"14154","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5617","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5617","id_setor":"131","setor":"CPD","id_depto":"1089","depto":"CPD","registro":" 14154","relevancia":"3"},{"id_lista":"14146","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3314","ramal":"5608","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3314-5608","id_setor":"3","setor":"Dep\u00f3sito","id_depto":"5","depto":"Checkin","registro":" 14146","relevancia":"3"},{"id_lista":"14164","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5638","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5638","id_setor":"3","setor":"Dep\u00f3sito","id_depto":"31","depto":"Trocas","registro":" 14164","relevancia":"3"},{"id_lista":"14157","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5625","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5625","id_setor":"82","setor":"Frente de Caixa","id_depto":"3","depto":"Cadastro","registro":" 14157","relevancia":"3"},{"id_lista":"14174","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5660","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5660","id_setor":"82","setor":"Frente de Caixa","id_depto":"3","depto":"Cadastro","registro":" 14174","relevancia":"3"},{"id_lista":"14156","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5624","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5624","id_setor":"82","setor":"Frente de Caixa","id_depto":"3","depto":"Cadastro","registro":" 14156","relevancia":"3"},{"id_lista":"14172","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5656","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5656","id_setor":"82","setor":"Frente de Caixa","id_depto":"1608","depto":"Fechamento de Caixa ","registro":" 14172","relevancia":"3"},{"id_lista":"14160","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5630","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5630","id_setor":"82","setor":"Frente de Caixa","id_depto":"13","depto":"Financeiro","registro":" 14160","relevancia":"3"},{"id_lista":"14158","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5626","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5626","id_setor":"82","setor":"Frente de Caixa","id_depto":"14","depto":"Frente de Caixa","registro":" 14158","relevancia":"3"},{"id_lista":"14020","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"83","prefixo":"3344","ramal":"5813","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(83)3344-5813","id_setor":"237","setor":"Frios","id_depto":"1088","depto":"Modem Cam.Fria","registro":" 14020","relevancia":"3"},{"id_lista":"14151","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5613","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5613","id_setor":"237","setor":"Frios","id_depto":"1088","depto":"Modem Cam.Fria","registro":" 14151","relevancia":"3"},{"id_lista":"14168","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5643","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5643","id_setor":"5","setor":"Ger\u00eancia","id_depto":"1139","depto":"Apoio Ger\u00eancia","registro":" 14168","relevancia":"3"},{"id_lista":"14161","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5633","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5633","id_setor":"5","setor":"Ger\u00eancia","id_depto":"410","depto":"Assist. Adm.","registro":" 14161","relevancia":"3"},{"id_lista":"14143","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5605","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5605","id_setor":"5","setor":"Ger\u00eancia","id_depto":"15","depto":"Ger\u00eancia Coml.","registro":" 14143","relevancia":"3"},{"id_lista":"14139","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5601","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5601","id_setor":"5","setor":"Ger\u00eancia","id_depto":"29","depto":"Superv. Adm.","registro":" 14139","relevancia":"3"},{"id_lista":"14169","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5645","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5645","id_setor":"5","setor":"Ger\u00eancia","id_depto":"30","depto":"Superv. Op.","registro":" 14169","relevancia":"3"},{"id_lista":"14159","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5629","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5629","id_setor":"88","setor":"L\u00edder","id_depto":"17","depto":"L\u00edder Deposito","registro":" 14159","relevancia":"3"},{"id_lista":"14170","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5647","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5647","id_setor":"88","setor":"L\u00edder","id_depto":"19","depto":"L\u00edder Frios","registro":" 14170","relevancia":"3"},{"id_lista":"14173","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5657","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5657","id_setor":"88","setor":"L\u00edder","id_depto":"20","depto":"L\u00edder Loja","registro":" 14173","relevancia":"3"},{"id_lista":"14167","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5642","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5642","id_setor":"6","setor":"Loja","id_depto":"1172","depto":"Cafeteria ","registro":" 14167","relevancia":"3"},{"id_lista":"14165","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5640","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5640","id_setor":"6","setor":"Loja","id_depto":"16","depto":"Hortifrutti","registro":" 14165","relevancia":"3"},{"id_lista":"14177","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5664","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5664","id_setor":"227","setor":"Nutricionista","id_depto":"1071","depto":"Nutricionista","registro":" 14177","relevancia":"3"},{"id_lista":"14171","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5655","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5655","id_setor":"90","setor":"Recep\u00e7\u00e3o","id_depto":"834","depto":"Entrada de Loja","registro":" 14171","relevancia":"3"},{"id_lista":"14149","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5611","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5611","id_setor":"90","setor":"Recep\u00e7\u00e3o","id_depto":"1525","depto":"Entrada func.","registro":" 14149","relevancia":"3"},{"id_lista":"14163","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5636","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5636","id_setor":"136","setor":"Refeit\u00f3rio","id_depto":"1093","depto":"Refeit\u00f3rio","registro":" 14163","relevancia":"3"},{"id_lista":"14155","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5617","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5617","id_setor":"93","setor":"RH","id_depto":"412","depto":"Audit\u00f3rio","registro":" 14155","relevancia":"3"},{"id_lista":"14162","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5635","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5635","id_setor":"91","setor":"RH","id_depto":"24","depto":"RH","registro":" 14162","relevancia":"3"},{"id_lista":"14147","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5609","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5609","id_setor":"92","setor":"RH","id_depto":"2143","depto":"RH - Analista","registro":" 14147","relevancia":"3"},{"id_lista":"14152","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5614","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5614","id_setor":"92","setor":"RH","id_depto":"1756","depto":"RH- Auxiliar ","registro":" 14152","relevancia":"3"},{"id_lista":"14175","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5661","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5661","id_setor":"92","setor":"RH","id_depto":"27","depto":"Sala de Reuni\u00e3o","registro":" 14175","relevancia":"3"},{"id_lista":"14140","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5602","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5602","id_setor":"95","setor":"RM","id_depto":"25","depto":"RM","registro":" 14140","relevancia":"3"},{"id_lista":"14144","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5606","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5606","id_setor":"94","setor":"RM","id_depto":"25","depto":"RM","registro":" 14144","relevancia":"3"},{"id_lista":"14145","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5607","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5607","id_setor":"94","setor":"RM","id_depto":"25","depto":"RM","registro":" 14145","relevancia":"3"},{"id_lista":"14176","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5662","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5662","id_setor":"97","setor":"Seguran\u00e7a","id_depto":"32","depto":"Guarita","registro":" 14176","relevancia":"3"},{"id_lista":"14150","id_filial":"273","filial":"273-MACEIO PETROPOLI","tl":"1","ddd":"82","prefixo":"3214","ramal":"5612","canal_voz":"N\u00c3\u00a3o Disponivel","telefone":"(82)3214-5612","id_setor":"97","setor":"Seguran\u00e7a","id_depto":"28","depto":"Seguran\u00e7a","registro":" 14150","relevancia":"3"}]'
                    );
                ?>

                <div class="scrollable-table-wrapper">
                    <table class="table table-striped table-bordered">
                        <tbody>
                        <?php foreach ($birthdayPeople as $birthdayPerson): ?>
                            <tr>
                                <td><?= $birthdayPerson->nome; ?></td>
                                <td><?= $birthdayPerson->aniversario; ?></td>
                            </tr>
                        <?php endforeach; ?>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-6 align-self-start">
            <div class="h-100 p-5 shadow-sm target">
                <h2 class="text-center">Lista de ramais</h2>

                <form id="phones-search-form" class="d-flex mb-3" role="search">
                    <input class="form-control me-2" type="search" placeholder="Digite o número ou setor" aria-label="Pesquisar">
                    <button class="btn btn-outline-secondary" type="button">Limpar</button>
                </form>

                <div class="scrollable-table-wrapper">
                    <table id="phones-table" class="table table-striped table-bordered">
                        <tbody>
                            <?php foreach($phones as $phone): ?>
                                <tr>
                                    <?php
                                        $phone->telefone = preg_replace("/(\(..\))(.+)/", "$1 $2", $phone->telefone);
                                        $phone->depto = mb_convert_case($phone->depto, MB_CASE_TITLE)
                                    ?>
                                    <td><?= $phone->telefone ?></td>
                                    <td><?= $phone->depto; ?></td>
                                </tr>
                            <?php endforeach; ?>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</main>

<?php $this->setSection("footer"); ?>
    <script src="<?= Helpers::baseUrl("/assets/js/home/scripts.js"); ?>"></script>
    <script> PhoneTable.phones = <?= json_encode($phones);?></script>
<?php $this->endSection("footer"); ?>
